module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},966,a=>{"use strict";let b=(0,a.i(40422).createClient)("https://aysoiacdxglzsuhtrfnp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5c29pYWNkeGdsenN1aHRyZm5wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDk2MjIsImV4cCI6MjA4MDAyNTYyMn0.5agJq8Jn_o2Mdwylq7LOHO0B8TAw2jJoJwnEjOsB950");a.s(["supabase",0,b])},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},88347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},90841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(67009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(72131),e=a.r(88347),f=a.r(90841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},52022,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(966);function f({url:a,alt:d="foto mÃ¡quina"}){let[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{console.log("URL de imagen recibida:",a)},[a]),!(a&&""!==a.trim()&&(a.startsWith("http://")||a.startsWith("https://")))||e)?(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):(0,b.jsxs)("div",{className:"relative w-16 h-16",children:[g&&(0,b.jsx)("div",{className:"absolute inset-0 bg-gray-100 rounded flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}),(0,b.jsx)("img",{src:a,alt:d,className:"w-16 h-16 object-cover rounded",onLoad:()=>{console.log("Imagen cargada correctamente:",a),h(!1)},onError:b=>{console.error("Error al cargar imagen:",a,b),f(!0),h(!1)},style:{display:g?"none":"block"}})]})}function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0);async function j(){i(!0);let{data:a,error:b}=await e.supabase.from("maquinas").select("*, clientes(nombre)").order("id");b?console.error("Error al cargar mÃ¡quinas:",b):(console.log("=== DATOS DE MÃQUINAS ==="),console.log("Total mÃ¡quinas:",a?.length),a?.forEach((a,b)=>{console.log(`M\xe1quina ${b+1}:`,{id:a.id,codigo:a.codigo,foto_url:a.foto_url,tipo_foto_url:typeof a.foto_url})}),console.log("========================="),g(a||[])),i(!1)}async function k(b){let c=a.find(a=>a.id===b),d=c?.codigo||`ID ${b}`;if(console.log("=== INTENTANDO ELIMINAR ==="),console.log("ID:",b),console.log("MÃ¡quina:",c),confirm(`\xbfEst\xe1s seguro de eliminar la m\xe1quina "${d}"?

Esta acci\xf3n no se puede deshacer.`))try{console.log("Ejecutando delete para ID:",b);let{data:a,error:c}=await e.supabase.from("maquinas").delete().eq("id",b).select();if(console.log("Respuesta de Supabase:"),console.log("- Data:",a),console.log("- Error:",c),console.log("- Error code:",c?.code),console.log("- Error message:",c?.message),console.log("- Error details:",c?.details),c){console.error("âŒ ERROR COMPLETO:",JSON.stringify(c,null,2)),"23503"===c.code?alert(`âŒ No se puede eliminar la m\xe1quina "${d}"

Esta m\xe1quina tiene registros relacionados.

Detalles: ${c.details||c.message}`):"42501"===c.code?alert(`âŒ No tienes permisos para eliminar esta m\xe1quina

Verifica las pol\xedticas RLS en Supabase.`):c.message?alert(`âŒ Error al eliminar: ${c.message}

C\xf3digo: ${c.code||"N/A"}`):alert(`âŒ Error desconocido al eliminar

Revisa la consola del navegador (F12)`);return}console.log("âœ… EliminaciÃ³n exitosa"),alert(`âœ… M\xe1quina "${d}" eliminada correctamente`),j()}catch(a){console.error("âŒ ERROR EN CATCH:",a),alert(`âŒ Error inesperado: ${a.message||"Error desconocido"}`)}}return((0,c.useEffect)(()=>{j()},[]),h)?(0,b.jsx)("div",{className:"p-6 flex justify-center items-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Cargando mÃ¡quinas..."})]})}):(0,b.jsxs)("div",{className:"p-6 max-w-[1400px] mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"MÃ¡quinas"}),(0,b.jsxs)(d.default,{href:"/admin/maquinas/crear",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors shadow-sm flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nueva MÃ¡quina"]})]}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-16 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,b.jsx)("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),(0,b.jsx)("p",{className:"text-gray-500 text-lg font-medium mb-2",children:"No hay mÃ¡quinas registradas"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Crea una nueva mÃ¡quina para comenzar"}),(0,b.jsx)(d.default,{href:"/admin/maquinas/crear",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Crear primera mÃ¡quina"})]}):(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Foto"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"CÃ³digo"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Marca"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Modelo"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Cliente"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"DescripciÃ³n"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(f,{url:a.foto_url,alt:`Foto de ${a.codigo}`})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.codigo||"â€”"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-700",children:a.marca||"â€”"}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-700",children:a.modelo||"â€”"}),(0,b.jsx)("td",{className:"px-4 py-3 text-gray-700",children:a.clientes?.nombre||"â€”"}),(0,b.jsx)("td",{className:"px-4 py-3 max-w-xs",children:(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.descripcion||"Sin descripciÃ³n"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"operativo"===a.estado?"bg-green-100 text-green-800":"en mantenimiento"===a.estado?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.estado||"â€”"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{className:"text-blue-600 hover:text-blue-800 font-medium text-sm transition-colors",href:`/admin/maquinas/editar/${a.id}`,title:"Editar",children:"âœï¸"}),(0,b.jsx)("button",{className:"text-red-600 hover:text-red-800 font-medium text-sm transition-colors",onClick:()=>k(a.id),title:"Eliminar",children:"ðŸ—‘ï¸"}),(0,b.jsx)(d.default,{className:"text-green-600 hover:text-green-800 font-medium text-sm transition-colors",href:`/admin/maquinas/${a.id}`,title:"Ver Perfil",children:"ðŸ‘ï¸"})]})})]},a.id))})]})})}),(0,b.jsxs)("div",{className:"mt-4 text-xs text-gray-400 text-center",children:["Total de mÃ¡quinas: ",a.length," | Abre la consola (F12) para ver detalles de las URLs"]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__84501a66._.js.map