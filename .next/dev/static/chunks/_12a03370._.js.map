{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BRAYAN/Desktop/Proyecto_Bashi/mantemin/lib/supabaseClient.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n)\r\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,0MAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BRAYAN/Desktop/Proyecto_Bashi/mantemin/app/login/page.jsx"],"sourcesContent":["// app/login/page.jsx\r\n'use client'\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"@/lib/supabaseClient\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const router = useRouter()\r\n\r\n  async function handleLogin(e) {\r\n    e.preventDefault()\r\n    setError(\"\")\r\n    setLoading(true)\r\n\r\n    try {\r\n      // Iniciar sesión con Supabase Auth\r\n      const { data: authData, error: authError } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n      })\r\n\r\n      if (authError) {\r\n        console.error(\"Error de autenticación:\", authError)\r\n        setError(\"Credenciales incorrectas\")\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      console.log(\"Autenticación exitosa:\", authData.user.email)\r\n\r\n      // Obtener el rol del usuario desde tu tabla usuarios\r\n      const { data: userData, error: userError } = await supabase\r\n        .from(\"usuarios\")\r\n        .select(\"*\")\r\n        .eq(\"email\", email)\r\n        .single()\r\n\r\n      console.log(\"Datos del usuario:\", userData)\r\n      console.log(\"Error al obtener usuario:\", userError)\r\n\r\n      if (userError || !userData) {\r\n        setError(`Usuario no encontrado en el sistema. Email: ${email}`)\r\n        await supabase.auth.signOut()\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      console.log(\"Rol del usuario:\", userData.rol)\r\n\r\n      // Redirigir según rol\r\n      if (userData.rol === \"admin\") {\r\n        console.log(\"Redirigiendo a /admin\")\r\n        router.push(\"/admin\")\r\n      } else if (userData.rol === \"tecnico\") {\r\n        console.log(\"Redirigiendo a /tecnico\")\r\n        router.push(\"/tecnico/dashboard\")\r\n      } else {\r\n        setError(`Rol no válido: ${userData.rol}`)\r\n        await supabase.auth.signOut()\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error al iniciar sesión: \" + err.message)\r\n      console.error(\"Error completo:\", err)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-screen flex items-center justify-center bg-gray-100\">\r\n      <form \r\n        onSubmit={handleLogin}\r\n        className=\"bg-white p-8 rounded-xl shadow-xl w-80\"\r\n      >\r\n        <h1 className=\"text-xl font-bold mb-4 text-center\">\r\n          Iniciar Sesión\r\n        </h1>\r\n\r\n        {error && (\r\n          <div className=\"text-red-600 text-sm mb-3 bg-red-50 p-3 rounded border border-red-200\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Correo\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full mb-3 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Contraseña\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"w-full mb-3 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none\"\r\n          required\r\n        />\r\n\r\n        <button \r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"w-full bg-blue-600 text-white p-2 rounded mt-2 hover:bg-blue-700 transition disabled:bg-gray-400\"\r\n        >\r\n          {loading ? \"Iniciando...\" : \"Entrar\"}\r\n        </button>\r\n\r\n        <div className=\"mt-4 text-xs text-gray-500 text-center\">\r\n          <p>Admin: brayan@admin.com</p>\r\n          <p>Técnico: tecnico1@ejemplo.com</p>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;AAErB;AACA;AACA;;;AAHA;;;;AAKe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,eAAe,YAAY,CAAC;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,mCAAmC;YACnC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;gBAClF;gBACA;YACF;YAEA,IAAI,WAAW;gBACb,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,SAAS;gBACT,WAAW;gBACX;YACF;YAEA,QAAQ,GAAG,CAAC,0BAA0B,SAAS,IAAI,CAAC,KAAK;YAEzD,qDAAqD;YACrD,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,oIAAQ,CACxD,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,SAAS,OACZ,MAAM;YAET,QAAQ,GAAG,CAAC,sBAAsB;YAClC,QAAQ,GAAG,CAAC,6BAA6B;YAEzC,IAAI,aAAa,CAAC,UAAU;gBAC1B,SAAS,CAAC,4CAA4C,EAAE,OAAO;gBAC/D,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;gBAC3B,WAAW;gBACX;YACF;YAEA,QAAQ,GAAG,CAAC,oBAAoB,SAAS,GAAG;YAE5C,sBAAsB;YACtB,IAAI,SAAS,GAAG,KAAK,SAAS;gBAC5B,QAAQ,GAAG,CAAC;gBACZ,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,SAAS,GAAG,KAAK,WAAW;gBACrC,QAAQ,GAAG,CAAC;gBACZ,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,SAAS,CAAC,eAAe,EAAE,SAAS,GAAG,EAAE;gBACzC,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;YAC7B;QACF,EAAE,OAAO,KAAK;YACZ,SAAS,8BAA8B,IAAI,OAAO;YAClD,QAAQ,KAAK,CAAC,mBAAmB;QACnC,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,UAAU;YACV,WAAU;;8BAEV,6LAAC;oBAAG,WAAU;8BAAqC;;;;;;gBAIlD,uBACC,6LAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,6LAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,WAAU;oBACV,QAAQ;;;;;;8BAGV,6LAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,WAAU;oBACV,QAAQ;;;;;;8BAGV,6LAAC;oBACC,MAAK;oBACL,UAAU;oBACV,WAAU;8BAET,UAAU,iBAAiB;;;;;;8BAG9B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAE;;;;;;sCACH,6LAAC;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAKb;GAnHwB;;QAKP,kJAAS;;;KALF"}}]
}