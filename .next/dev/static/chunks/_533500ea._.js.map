{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BRAYAN/Desktop/Proyecto_Bashi/mantemin/lib/supabase.js"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\"\r\n\r\n// Cliente público (para login, dashboards, etc.)\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n)\r\n\r\n// Cliente ADMIN — SOLO en servidor\r\nexport const supabaseAdmin = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY,\r\n  {\r\n    auth: { persistSession: false }\r\n  }\r\n)\r\n"],"names":[],"mappings":";;;;;;AAIE;AAJF;;AAGO,MAAM,WAAW,IAAA,0MAAY;AAM7B,MAAM,gBAAgB,IAAA,0MAAY,gFAEvC,2KAAO,CAAC,GAAG,CAAC,yBAAyB,EACrC;IACE,MAAM;QAAE,gBAAgB;IAAM;AAChC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BRAYAN/Desktop/Proyecto_Bashi/mantemin/app/admin/crear-tecnico/page.jsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from \"react\"\r\nimport { supabase } from \"@/lib/supabase\"\r\n\r\nexport default function CrearTecnico() {\r\n  const [nombre, setNombre] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [mensaje, setMensaje] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n\r\n  async function registrarTecnico(e) {\r\n    e.preventDefault()\r\n    setError(\"\")\r\n    setMensaje(\"\")\r\n\r\n    if (!nombre || !email || !password) {\r\n      setError(\"Todos los campos son obligatorios\")\r\n      return\r\n    }\r\n\r\n    // 1) Validar si ya existe un usuario con ese email\r\n    const { data: existente } = await supabase\r\n      .from(\"usuarios\")\r\n      .select(\"*\")\r\n      .eq(\"email\", email)\r\n      .maybeSingle()\r\n\r\n    if (existente) {\r\n      setError(\"El correo ya está registrado por otro usuario\")\r\n      return\r\n    }\r\n\r\n    // 2) Insertar nuevo técnico\r\n    const { error: insertError } = await supabase\r\n      .from(\"usuarios\")\r\n      .insert([\r\n        {\r\n          nombre,\r\n          email,\r\n          password,\r\n          rol: \"tecnico\"\r\n        }\r\n      ])\r\n\r\n    if (insertError) {\r\n      setError(\"Error al crear técnico\")\r\n      return\r\n    }\r\n\r\n    setMensaje(\"Técnico registrado correctamente ✔\")\r\n    setNombre(\"\")\r\n    setEmail(\"\")\r\n    setPassword(\"\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-10 max-w-lg mx-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Registrar Técnico</h1>\r\n\r\n      {error && <p className=\"text-red-500 mb-3\">{error}</p>}\r\n      {mensaje && <p className=\"text-green-600 mb-3\">{mensaje}</p>}\r\n\r\n      <form onSubmit={registrarTecnico} className=\"space-y-4 bg-white p-6 shadow rounded\">\r\n        \r\n        <div>\r\n          <label className=\"block mb-1\">Nombre</label>\r\n          <input \r\n            type=\"text\"\r\n            value={nombre}\r\n            onChange={(e) => setNombre(e.target.value)}\r\n            className=\"w-full p-2 border rounded\"\r\n            placeholder=\"Ej: Juan Pérez\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1\">Correo</label>\r\n          <input \r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className=\"w-full p-2 border rounded\"\r\n            placeholder=\"email@empresa.com\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1\">Contraseña</label>\r\n          <input \r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full p-2 border rounded\"\r\n            placeholder=\"********\"\r\n          />\r\n        </div>\r\n\r\n        <button \r\n          type=\"submit\"\r\n          className=\"w-full bg-blue-600 text-white p-2 rounded\"\r\n        >\r\n          Registrar Técnico\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,eAAe,iBAAiB,CAAC;QAC/B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,UAAU;YAClC,SAAS;YACT;QACF;QAEA,mDAAmD;QACnD,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,8HAAQ,CACvC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,SAAS,OACZ,WAAW;QAEd,IAAI,WAAW;YACb,SAAS;YACT;QACF;QAEA,4BAA4B;QAC5B,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,8HAAQ,CAC1C,IAAI,CAAC,YACL,MAAM,CAAC;YACN;gBACE;gBACA;gBACA;gBACA,KAAK;YACP;SACD;QAEH,IAAI,aAAa;YACf,SAAS;YACT;QACF;QAEA,WAAW;QACX,UAAU;QACV,SAAS;QACT,YAAY;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,uBAAS,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;YAC3C,yBAAW,6LAAC;gBAAE,WAAU;0BAAuB;;;;;;0BAEhD,6LAAC;gBAAK,UAAU;gBAAkB,WAAU;;kCAE1C,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAa;;;;;;0CAC9B,6LAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAIhB,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAa;;;;;;0CAC9B,6LAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAIhB,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAAa;;;;;;0CAC9B,6LAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAIhB,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;GAvGwB;KAAA"}}]
}