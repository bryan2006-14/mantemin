{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BRAYAN/Desktop/Proyecto_Bashi/mantemin/lib/supabaseAdmin.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nexport const supabaseAdmin = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY,\r\n  { auth: { persistSession: false } }\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,gBAAgB,IAAA,uMAAY,gFAEvC,QAAQ,GAAG,CAAC,yBAAyB,EACrC;IAAE,MAAM;QAAE,gBAAgB;IAAM;AAAE"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BRAYAN/Desktop/Proyecto_Bashi/mantemin/app/login/page.jsx"],"sourcesContent":["'use client'\r\nimport { useState } from \"react\"\r\nimport { supabaseAdmin } from \"@/lib/supabaseAdmin\"\r\n\r\nimport { useRouter } from \"next/navigation\"\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n  const router = useRouter()\r\n\r\n  async function handleLogin(e) {\r\n    e.preventDefault()\r\n    setError(\"\")\r\n\r\n    // Buscar usuario manualmente en la tabla usuarios\r\n    const { data, error: queryError } = await supabase\r\n      .from(\"usuarios\")\r\n      .select(\"*\")\r\n      .eq(\"email\", email)\r\n      .eq(\"password\", password)\r\n      .single()\r\n\r\n    if (queryError || !data) {\r\n      setError(\"Credenciales incorrectas\")\r\n      return\r\n    }\r\n\r\n    // Redirigir según rol\r\n    if (data.rol === \"admin\") {\r\n      router.push(\"/admin\")\r\n    } else if (data.rol === \"tecnico\") {\r\n      router.push(\"/tecnico\")\r\n    } else {\r\n      setError(\"Rol no válido\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-screen flex items-center justify-center bg-gray-100\">\r\n      <form \r\n        onSubmit={handleLogin}\r\n        className=\"bg-white p-8 rounded-xl shadow-xl w-80\"\r\n      >\r\n        <h1 className=\"text-xl font-bold mb-4 text-center\">\r\n          Iniciar Sesión\r\n        </h1>\r\n\r\n        {error && (\r\n          <p className=\"text-red-600 text-sm mb-3\">{error}</p>\r\n        )}\r\n\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Correo\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full mb-3 p-2 border rounded\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Contraseña\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"w-full mb-3 p-2 border rounded\"\r\n          required\r\n        />\r\n\r\n        <button \r\n          type=\"submit\"\r\n          className=\"w-full bg-blue-600 text-white p-2 rounded mt-2\"\r\n        >\r\n          Entrar\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,+IAAS;IAExB,eAAe,YAAY,CAAC;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,kDAAkD;QAClD,MAAM,EAAE,IAAI,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SACvC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,SAAS,OACZ,EAAE,CAAC,YAAY,UACf,MAAM;QAET,IAAI,cAAc,CAAC,MAAM;YACvB,SAAS;YACT;QACF;QAEA,sBAAsB;QACtB,IAAI,KAAK,GAAG,KAAK,SAAS;YACxB,OAAO,IAAI,CAAC;QACd,OAAO,IAAI,KAAK,GAAG,KAAK,WAAW;YACjC,OAAO,IAAI,CAAC;QACd,OAAO;YACL,SAAS;QACX;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,UAAU;YACV,WAAU;;8BAEV,8OAAC;oBAAG,WAAU;8BAAqC;;;;;;gBAIlD,uBACC,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAG5C,8OAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,WAAU;oBACV,QAAQ;;;;;;8BAGV,8OAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,WAAU;oBACV,QAAQ;;;;;;8BAGV,8OAAC;oBACC,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT"}}]
}