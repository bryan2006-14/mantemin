(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33726,e=>{"use strict";let s=(0,e.i(24632).createClient)("https://aysoiacdxglzsuhtrfnp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5c29pYWNkeGdsenN1aHRyZm5wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDk2MjIsImV4cCI6MjA4MDAyNTYyMn0.5agJq8Jn_o2Mdwylq7LOHO0B8TAw2jJoJwnEjOsB950");e.s(["supabase",0,s])},18566,(e,s,a)=>{s.exports=e.r(76562)},85859,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(33726),i=e.i(18566);function t(){let[e,t]=(0,a.useState)(null),[l,n]=(0,a.useState)([]),[d,c]=(0,a.useState)(!0),o=(0,i.useRouter)(),m=(0,i.useParams)();async function x(){try{let{data:e,error:s}=await r.supabase.from("clientes").select("*").eq("id",m.id).single();if(s)throw s;let{data:a,error:i}=await r.supabase.from("maquinas").select("*").eq("cliente_id",m.id).order("codigo");if(i)throw i;t(e),n(a||[])}catch(e){console.error("Error:",e),alert("Error al cargar datos")}finally{c(!1)}}async function h(e,s){if(confirm(`\xbfEliminar m\xe1quina ${s}?`))try{let{error:s}=await r.supabase.from("maquinas").delete().eq("id",e);if(s)throw s;alert("Máquina eliminada"),x()}catch(e){alert("Error: "+e.message)}}return((0,a.useEffect)(()=>{x()},[]),d)?(0,s.jsx)("div",{className:"p-10 text-center",children:"Cargando..."}):e?(0,s.jsxs)("div",{className:"p-10 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:e.nombre}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>o.push(`/admin/clientes/${e.id}/editar`),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Editar Cliente"}),(0,s.jsx)("button",{onClick:()=>o.push("/admin/clientes"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"← Volver"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"RUC:"}),(0,s.jsx)("p",{className:"font-medium",children:e.ruc||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Teléfono:"}),(0,s.jsx)("p",{className:"font-medium",children:e.telefono||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Email:"}),(0,s.jsx)("p",{className:"font-medium",children:e.email||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Dirección:"}),(0,s.jsx)("p",{className:"font-medium",children:e.direccion||"N/A"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold",children:["Máquinas (",l.length,")"]}),(0,s.jsx)("button",{onClick:()=>o.push(`/admin/clientes/${e.id}/maquinas/crear`),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"+ Agregar Máquina"})]}),0===l.length?(0,s.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No hay máquinas registradas"}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-lg transition",children:[e.foto_url&&(0,s.jsx)("img",{src:e.foto_url,alt:e.codigo,className:"w-full h-40 object-cover rounded mb-3"}),(0,s.jsx)("h3",{className:"font-bold text-lg mb-2",children:e.codigo}),(0,s.jsxs)("div",{className:"text-sm space-y-1 mb-3",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Marca:"})," ",e.marca||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Modelo:"})," ",e.modelo||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Horómetro:"})," ",e.horometro," hrs"]}),(0,s.jsx)("p",{children:(0,s.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"operativa"===e.estado?"bg-green-100 text-green-800":"mantenimiento"===e.estado?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.estado})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>o.push(`/admin/ordenes/crear?maquina=${e.id}`),className:"flex-1 px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm",children:"Crear OT"}),(0,s.jsx)("button",{onClick:()=>o.push(`/admin/maquinas/${e.id}/editar`),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>h(e.id,e.codigo),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Eliminar"})]})]},e.id))})]})]}):(0,s.jsx)("div",{className:"p-10 text-center",children:"Cliente no encontrado"})}e.s(["default",()=>t])}]);