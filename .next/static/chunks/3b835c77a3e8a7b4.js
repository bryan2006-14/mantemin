(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},81601,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(33726),a=e.i(18566);function l(){let[e,l]=(0,t.useState)([]),[i,n]=(0,t.useState)(!0),c=(0,a.useRouter)();async function d(){try{let{data:e,error:s}=await r.supabase.from("clientes").select(`
          *,
          maquinas (count)
        `).order("nombre");if(s)throw s;l(e||[])}catch(e){console.error("Error al cargar clientes:",e)}finally{n(!1)}}async function o(e,s){if(confirm(`\xbfEst\xe1s seguro de eliminar a ${s}? Esto eliminar\xe1 todas sus m\xe1quinas.`))try{let{error:s}=await r.supabase.from("clientes").delete().eq("id",e);if(s)throw s;alert("Cliente eliminado correctamente"),d()}catch(e){alert("Error al eliminar: "+e.message)}}return((0,t.useEffect)(()=>{d()},[]),i)?(0,s.jsx)("div",{className:"p-10 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Cargando clientes..."})}):(0,s.jsxs)("div",{className:"p-10 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Clientes"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>c.push("/admin/clientes/crear"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"+ Nuevo Cliente"}),(0,s.jsx)("button",{onClick:()=>c.push("/admin"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"← Volver"})]})]}),0===e.length?(0,s.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"No hay clientes registrados"})}):(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 text-left border",children:"Nombre"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"RUC"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Teléfono"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Email"}),(0,s.jsx)("th",{className:"p-3 text-center border",children:"Máquinas"}),(0,s.jsx)("th",{className:"p-3 text-center border",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,s.jsx)("td",{className:"border p-3 font-medium",children:e.nombre}),(0,s.jsx)("td",{className:"border p-3",children:e.ruc||"N/A"}),(0,s.jsx)("td",{className:"border p-3",children:e.telefono||"N/A"}),(0,s.jsx)("td",{className:"border p-3",children:e.email||"N/A"}),(0,s.jsx)("td",{className:"border p-3 text-center",children:(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:e.maquinas?.[0]?.count||0})}),(0,s.jsx)("td",{className:"border p-3",children:(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)("button",{onClick:()=>c.push(`/admin/clientes/${e.id}`),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Ver"}),(0,s.jsx)("button",{onClick:()=>c.push(`/admin/clientes/${e.id}/editar`),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>o(e.id,e.nombre),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Eliminar"})]})})]},e.id))})]})})]})}e.s(["default",()=>l])}]);