(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,o)=>{r.exports=e.r(76562)},35778,e=>{"use strict";var r=e.i(43476),o=e.i(71645),a=e.i(33726),t=e.i(18566);function s(){let[e,s]=(0,o.useState)(""),[n,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(""),[u,d]=(0,o.useState)(!1),m=(0,t.useRouter)();async function b(r){r.preventDefault(),c(""),d(!0);try{let{data:r,error:o}=await a.supabase.auth.signInWithPassword({email:e,password:n});if(o){console.error("Error de autenticación:",o),c("Credenciales incorrectas"),d(!1);return}console.log("Autenticación exitosa:",r.user.email);let{data:t,error:s}=await a.supabase.from("usuarios").select("*").eq("email",e).single();if(console.log("Datos del usuario:",t),console.log("Error al obtener usuario:",s),s||!t){c(`Usuario no encontrado en el sistema. Email: ${e}`),await a.supabase.auth.signOut(),d(!1);return}console.log("Rol del usuario:",t.rol),"admin"===t.rol?(console.log("Redirigiendo a /admin"),m.push("/admin")):"tecnico"===t.rol?(console.log("Redirigiendo a /tecnico"),m.push("/tecnico/dashboard")):(c(`Rol no v\xe1lido: ${t.rol}`),await a.supabase.auth.signOut())}catch(e){c("Error al iniciar sesión: "+e.message),console.error("Error completo:",e)}finally{d(!1)}}return(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("form",{onSubmit:b,className:"bg-white p-8 rounded-xl shadow-xl w-80",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4 text-center",children:"Iniciar Sesión"}),l&&(0,r.jsx)("div",{className:"text-red-600 text-sm mb-3 bg-red-50 p-3 rounded border border-red-200",children:l}),(0,r.jsx)("input",{type:"email",placeholder:"Correo",value:e,onChange:e=>s(e.target.value),className:"w-full mb-3 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Contraseña",value:n,onChange:e=>i(e.target.value),className:"w-full mb-3 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),(0,r.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white p-2 rounded mt-2 hover:bg-blue-700 transition disabled:bg-gray-400",children:u?"Iniciando...":"Entrar"}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[(0,r.jsx)("p",{children:"Admin: brayan@admin.com"}),(0,r.jsx)("p",{children:"Técnico: tecnico1@ejemplo.com"})]})]})})}e.s(["default",()=>s])}]);