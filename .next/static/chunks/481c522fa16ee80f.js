(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33726,e=>{"use strict";let r=(0,e.i(24632).createClient)("https://aysoiacdxglzsuhtrfnp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5c29pYWNkeGdsenN1aHRyZm5wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDk2MjIsImV4cCI6MjA4MDAyNTYyMn0.5agJq8Jn_o2Mdwylq7LOHO0B8TAw2jJoJwnEjOsB950");e.s(["supabase",0,r])},18566,(e,r,s)=>{r.exports=e.r(76562)},35778,e=>{"use strict";var r=e.i(43476),s=e.i(71645),a=e.i(33726),t=e.i(18566);function o(){let[e,o]=(0,s.useState)(""),[i,n]=(0,s.useState)(""),[l,u]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),m=(0,t.useRouter)();async function b(r){r.preventDefault(),u(""),d(!0);try{let{data:r,error:s}=await a.supabase.auth.signInWithPassword({email:e,password:i});if(s){console.error("Error de autenticación:",s),u("Credenciales incorrectas"),d(!1);return}console.log("Autenticación exitosa:",r.user.email);let{data:t,error:o}=await a.supabase.from("usuarios").select("*").eq("email",e).single();if(console.log("Datos del usuario:",t),console.log("Error al obtener usuario:",o),o||!t){u(`Usuario no encontrado en el sistema. Email: ${e}`),await a.supabase.auth.signOut(),d(!1);return}console.log("Rol del usuario:",t.rol),"admin"===t.rol?(console.log("Redirigiendo a /admin"),m.push("/admin")):"tecnico"===t.rol?(console.log("Redirigiendo a /tecnico"),m.push("/tecnico/dashboard")):(u(`Rol no v\xe1lido: ${t.rol}`),await a.supabase.auth.signOut())}catch(e){u("Error al iniciar sesión: "+e.message),console.error("Error completo:",e)}finally{d(!1)}}return(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("form",{onSubmit:b,className:"bg-white p-8 rounded-xl shadow-xl w-80",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4 text-center",children:"Iniciar Sesión"}),l&&(0,r.jsx)("div",{className:"text-red-600 text-sm mb-3 bg-red-50 p-3 rounded border border-red-200",children:l}),(0,r.jsx)("input",{type:"email",placeholder:"Correo",value:e,onChange:e=>o(e.target.value),className:"w-full mb-3 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Contraseña",value:i,onChange:e=>n(e.target.value),className:"w-full mb-3 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white p-2 rounded mt-2 hover:bg-blue-700 transition disabled:bg-gray-400",children:c?"Iniciando...":"Entrar"}),(0,r.jsx)("div",{className:"mt-4 text-xs text-gray-500 text-center"})]})})}e.s(["default",()=>o])}]);