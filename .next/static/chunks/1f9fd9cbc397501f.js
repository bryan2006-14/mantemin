(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},82434,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(33726),r=e.i(18566);function l(){let[e,l]=(0,t.useState)([]),[d,n]=(0,t.useState)(!0),c=(0,r.useRouter)();async function i(){try{let{data:e,error:s}=await a.supabase.from("tareas").select(`
          *,
          usuarios:tecnico_id (nombre, email),
          ordenes:orden_id (id, descripcion)
        `).order("created_at",{ascending:!1});s?console.error("Error al cargar tareas:",s):l(e||[])}catch(e){console.error("Error inesperado:",e)}finally{n(!1)}}function o(e){return e?new Date(e).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}return((0,t.useEffect)(()=>{i()},[]),d)?(0,s.jsx)("div",{className:"p-10 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Cargando tareas..."})}):(0,s.jsxs)("div",{className:"p-10 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Gestión de Tareas"}),(0,s.jsx)("button",{onClick:()=>c.push("/admin"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"← Volver al Dashboard"})]}),0===e.length?(0,s.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"No hay tareas registradas"})}):(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 text-left border",children:"ID"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Técnico"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Orden"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Estado"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Inicio"}),(0,s.jsx)("th",{className:"p-3 text-left border",children:"Fin"}),(0,s.jsx)("th",{className:"p-3 text-center border",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,s.jsxs)("td",{className:"border p-3",children:["#",e.id]}),(0,s.jsx)("td",{className:"border p-3",children:e.usuarios?.nombre||"Sin asignar"}),(0,s.jsxs)("td",{className:"border p-3",children:["OT #",e.orden_id]}),(0,s.jsx)("td",{className:"border p-3",children:(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${{trabajando:"bg-yellow-100 text-yellow-800",completada:"bg-green-100 text-green-800",pausada:"bg-orange-100 text-orange-800",cancelada:"bg-red-100 text-red-800"}[e.estado]||"bg-gray-100 text-gray-800"}`,children:e.estado})}),(0,s.jsx)("td",{className:"border p-3 text-sm",children:o(e.inicio)}),(0,s.jsx)("td",{className:"border p-3 text-sm",children:o(e.fin)}),(0,s.jsx)("td",{className:"border p-3 text-center",children:(0,s.jsx)("button",{onClick:()=>c.push(`/admin/tareas/${e.id}`),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:"Ver detalles"})})]},e.id))})]})}),(0,s.jsxs)("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Resumen"}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total tareas:"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:e.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"En progreso:"}),(0,s.jsx)("p",{className:"text-xl font-bold text-yellow-600",children:e.filter(e=>"trabajando"===e.estado).length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Completadas:"}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-600",children:e.filter(e=>"completada"===e.estado).length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Canceladas:"}),(0,s.jsx)("p",{className:"text-xl font-bold text-red-600",children:e.filter(e=>"cancelada"===e.estado).length})]})]})]})]})}e.s(["default",()=>l])}]);