(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33726,e=>{"use strict";let l=(0,e.i(24632).createClient)("https://aysoiacdxglzsuhtrfnp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5c29pYWNkeGdsenN1aHRyZm5wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDk2MjIsImV4cCI6MjA4MDAyNTYyMn0.5agJq8Jn_o2Mdwylq7LOHO0B8TAw2jJoJwnEjOsB950");e.s(["supabase",0,l])},18566,(e,l,s)=>{l.exports=e.r(76562)},6092,e=>{"use strict";var l=e.i(43476),s=e.i(71645),a=e.i(33726),n=e.i(18566);function o(){let[e,o]=(0,s.useState)(null),[i,r]=(0,s.useState)({codigo:"",marca:"",modelo:"",serie:"",horometro:0,estado:"operativa",foto_url:"",ubicacion_lat:null,ubicacion_lng:null}),[t,c]=(0,s.useState)(!1),u=(0,n.useRouter)(),d=(0,n.useParams)();async function m(){let{data:e}=await a.supabase.from("clientes").select("*").eq("id",d.id).single();o(e)}function b(e){let{name:l,value:s,type:a}=e.target;r({...i,[l]:"number"===a?parseFloat(s):s})}async function p(e){e.preventDefault(),c(!0);try{let{error:e}=await a.supabase.from("maquinas").insert([{...i,cliente_id:d.id}]);if(e)throw e;alert("Máquina registrada correctamente"),u.push(`/admin/clientes/${d.id}`)}catch(e){alert("Error al crear máquina: "+e.message)}finally{c(!1)}}return((0,s.useEffect)(()=>{m()},[]),e)?(0,l.jsxs)("div",{className:"p-10 max-w-3xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Registrar Nueva Máquina"}),(0,l.jsxs)("p",{className:"text-gray-600",children:["Cliente: ",e.nombre]})]}),(0,l.jsxs)("form",{onSubmit:p,className:"bg-white p-6 rounded-lg shadow space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Código *"}),(0,l.jsx)("input",{type:"text",name:"codigo",value:i.codigo,onChange:b,placeholder:"Ej: EXC-001",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Marca"}),(0,l.jsx)("input",{type:"text",name:"marca",value:i.marca,onChange:b,placeholder:"Ej: Caterpillar",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Modelo"}),(0,l.jsx)("input",{type:"text",name:"modelo",value:i.modelo,onChange:b,placeholder:"Ej: 320D",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Serie"}),(0,l.jsx)("input",{type:"text",name:"serie",value:i.serie,onChange:b,placeholder:"Número de serie",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Horómetro (hrs)"}),(0,l.jsx)("input",{type:"number",name:"horometro",value:i.horometro,onChange:b,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Estado"}),(0,l.jsxs)("select",{name:"estado",value:i.estado,onChange:b,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,l.jsx)("option",{value:"operativa",children:"Operativa"}),(0,l.jsx)("option",{value:"mantenimiento",children:"En Mantenimiento"}),(0,l.jsx)("option",{value:"fuera_servicio",children:"Fuera de Servicio"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"URL de Foto"}),(0,l.jsx)("input",{type:"url",name:"foto_url",value:i.foto_url,onChange:b,placeholder:"https://ejemplo.com/foto.jpg",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"}),i.foto_url&&(0,l.jsx)("img",{src:i.foto_url,alt:"Preview",className:"mt-2 h-32 object-cover rounded"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Latitud"}),(0,l.jsx)("input",{type:"number",name:"ubicacion_lat",value:i.ubicacion_lat||"",onChange:b,step:"0.0001",placeholder:"-12.0464",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Longitud"}),(0,l.jsx)("input",{type:"number",name:"ubicacion_lng",value:i.ubicacion_lng||"",onChange:b,step:"0.0001",placeholder:"-77.0428",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)("button",{type:"submit",disabled:t,className:"flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition disabled:bg-gray-400",children:t?"Guardando...":"Guardar Máquina"}),(0,l.jsx)("button",{type:"button",onClick:()=>u.push(`/admin/clientes/${d.id}`),className:"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Cancelar"})]})]})]}):(0,l.jsx)("div",{className:"p-10 text-center",children:"Cargando..."})}e.s(["default",()=>o])}]);