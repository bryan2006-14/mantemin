(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33726,e=>{"use strict";let s=(0,e.i(24632).createClient)("https://aysoiacdxglzsuhtrfnp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5c29pYWNkeGdsenN1aHRyZm5wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDk2MjIsImV4cCI6MjA4MDAyNTYyMn0.5agJq8Jn_o2Mdwylq7LOHO0B8TAw2jJoJwnEjOsB950");e.s(["supabase",0,s])},18566,(e,s,a)=>{s.exports=e.r(76562)},83074,e=>{"use strict";var s=e.i(43476),a=e.i(71645),i=e.i(33726),l=e.i(18566);function t(){let[e,t]=(0,a.useState)(null),[c,r]=(0,a.useState)(null),[n,d]=(0,a.useState)(null),[o,m]=(0,a.useState)(!0),x=(0,l.useRouter)(),h=(0,l.useParams)();async function u(){try{let{data:e}=await i.supabase.from("historial_trabajos").select("*").eq("id",h.id).single();if(!e){alert("Trabajo no encontrado"),x.push("/tecnico/historial");return}t(e);let{data:s}=await i.supabase.from("maquinas").select("*").eq("id",e.maquina_id).maybeSingle();if(r(s),s?.cliente_id){let{data:e}=await i.supabase.from("clientes").select("*").eq("id",s.cliente_id).maybeSingle();d(e)}}catch(e){console.error("Error:",e)}finally{m(!1)}}return((0,a.useEffect)(()=>{u()},[]),o)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Detalle del Trabajo"}),(0,s.jsx)("button",{onClick:()=>x.push("/tecnico/historial"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"â† Volver al Historial"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"InformaciÃ³n General"}),(0,s.jsx)("span",{className:"px-4 py-2 bg-green-100 text-green-800 rounded-full font-medium",children:"âœ… Completado"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"MÃ¡quina"}),(0,s.jsx)("p",{className:"font-bold text-lg",children:c?.codigo||"N/A"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[c?.marca," ",c?.modelo]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Cliente"}),(0,s.jsx)("p",{className:"font-medium",children:n?.nombre||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Tipo de Trabajo"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:e.tipo})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"DuraciÃ³n Total"}),(0,s.jsx)("p",{className:"font-bold text-2xl text-blue-600",children:function(e){if(!e)return"N/A";let s=Math.floor(e/60),a=e%60;return 0===s?`${a} minutos`:`${s} hora${s>1?"s":""} ${a} minutos`}(e.duracion_minutos)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Inicio"}),(0,s.jsx)("p",{className:"font-medium text-sm",children:new Date(e.inicio).toLocaleString("es-ES")})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"FinalizaciÃ³n"}),(0,s.jsx)("p",{className:"font-medium text-sm",children:new Date(e.fin).toLocaleString("es-ES")})]})]})]})]})]}),e.descripcion&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-3",children:"ðŸ“‹ Problema Reportado"}),(0,s.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:(0,s.jsx)("p",{className:"text-gray-700",children:e.descripcion})})]}),e.observaciones&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-3",children:"ðŸ“ Observaciones del TÃ©cnico"}),(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded",children:(0,s.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.observaciones})})]}),e.evidencias&&e.evidencias.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-4",children:["ðŸ“¸ Evidencias FotogrÃ¡ficas (",e.evidencias.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.evidencias.map((e,a)=>(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden hover:shadow-lg transition",children:[(0,s.jsx)("img",{src:e.url,alt:`Evidencia ${a+1}`,className:"w-full h-48 object-cover cursor-pointer",onClick:()=>window.open(e.url,"_blank")}),(0,s.jsxs)("div",{className:"p-3",children:[e.descripcion&&(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:e.descripcion}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.fecha).toLocaleString("es-ES")})]})]},a))})]})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("p",{children:"Trabajo no encontrado"})})}e.s(["default",()=>t])}]);